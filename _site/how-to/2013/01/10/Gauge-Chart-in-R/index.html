<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Gauge Chart in R &middot; Gaston Sanchez
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Gaston Sanchez
        </a>
      </h1>
      <p class="lead"></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/">Blog</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/software/">Software</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/teaching/">Teaching</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/gastonstat" target="_blank">GitHub</a>
    </nav>

    <!-- <p><small>All contents under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">(CC) BY-NC-SA</a> license, unless otherwise noted</small></p>
  -->
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Gauge Chart in R</h1>
  <span class="post-date">10 Jan 2013</span>
  <h3>How to replicate a google gauge chart in R?</h3>

<p>Google charts has several options to produce nice graphics. Most of them have their 
equivalent function in R and can be quickly replicated, but some of them require a bit of 
programming. </p>

<!--more-->

<p>For instance, take the <a title="google gauge chart" href="https://developers.google.com/chart/interactive/docs/gallery/gauge" target="_blank">google gauge charts</a>
which I really like:</p>

<p><img class="centered" src="/images/blog/google_gauge_charts.png" /></p>

<p>A gauge is a very common chart used in information dashboards; you can use a gauge when 
you want to show a single value within a given scale. These charts typically show a key 
indicator within a range of values, employing a semaphoric color code (eg green, yellow, 
red). Although some people say gauges provide very little information for the amount of 
space they consume, we&#39;re not going to discuss whether gauges are good or bad, or what 
type of colors we should use. We&#39;re just going to see how we can create gauges in R.</p>

<h3>Preliminaries</h3>

<p>Look at the following gauge from google charts:</p>

<p><img class="centered" src="/images/blog/google_gauge.png" /></p>

<p>We can distinguish the following elements:</p>

<ul>
<li>circles Â (black and grey circles in the circumference)</li>
<li>bands (yellow and red stripes)</li>
<li>major ticks</li>
<li>minor ticks</li>
<li>minimum and maximum values (0, 100)</li>
<li>value (eg 90)</li>
<li>label (Memory)</li>
<li>blue point in the middle</li>
<li>needle</li>
</ul>

<p>The idea is to break down the chart into its different components so we can have a better 
idea of how to create a gauge chart in R.</p>

<h3>Handy Functions</h3>

<p>We will need three auxiliary functions to produce the circles, the stripe-bands, and the 
tick marks around the gauge. Keep in mind that we will be working going back and forth 
between radians and degrees to get the x-y coordinates of the elements we&#39;re going to plot.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># function to create a circle</span>
circle <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>center<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">),</span> radius<span class="o">=</span><span class="m">1</span><span class="p">,</span> npoints<span class="o">=</span><span class="m">100</span><span class="p">)</span>
<span class="p">{</span>
  r <span class="o">=</span> radius
  tt <span class="o">=</span> <span class="kp">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="o">*</span><span class="kc">pi</span><span class="p">,</span> length<span class="o">=</span>npoints<span class="p">)</span>
  xx <span class="o">=</span> center<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">+</span> r <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>tt<span class="p">)</span>
  yy <span class="o">=</span> center<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">+</span> r <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>tt<span class="p">)</span>
  <span class="kr">return</span><span class="p">(</span><span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> xx<span class="p">,</span> y <span class="o">=</span> yy<span class="p">))</span>
<span class="p">}</span>

<span class="c1"># function to get slices</span>
slice2xy <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span><span class="kp">t</span><span class="p">,</span> rad<span class="p">)</span> 
<span class="p">{</span>
  t2p <span class="o">=</span> <span class="m">-1</span> <span class="o">*</span> t <span class="o">*</span> <span class="kc">pi</span> <span class="o">+</span> <span class="m">10</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span>
  <span class="kt">list</span><span class="p">(</span>x <span class="o">=</span> rad <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>t2p<span class="p">),</span> y <span class="o">=</span> rad <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>t2p<span class="p">))</span>
<span class="p">}</span>

<span class="c1"># function to get major and minor tick marks</span>
ticks <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>center <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">0</span><span class="p">,</span> to <span class="o">=</span> <span class="m">2</span><span class="o">*</span><span class="kc">pi</span><span class="p">,</span> 
                  radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> npoints <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="p">{</span>
  r <span class="o">=</span> radius
  tt <span class="o">=</span> <span class="kp">seq</span><span class="p">(</span>from<span class="p">,</span> to<span class="p">,</span> length <span class="o">=</span> npoints<span class="p">)</span>
  xx <span class="o">=</span> center<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">+</span> r <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>tt<span class="p">)</span>
  yy <span class="o">=</span> center<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">+</span> r <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>tt<span class="p">)</span>
  <span class="kr">return</span><span class="p">(</span><span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> xx<span class="p">,</span> y <span class="o">=</span> yy<span class="p">))</span>
<span class="p">}</span></code></pre></div>

<h3>Preparing elements</h3>

<p>After defining the handy functions, we need to create the components that will be 
plotted: the black border, the gray circles, the yellow stripe, the red stripe, the 
major tick marks, the minor tick marks, the coordinates of the minimum and maximum 
values, the value indicator, the needle, and the label. Here&#39;s how we can define all 
these elements:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># external circle (this will be used for the black border)</span>
border_cir <span class="o">=</span> circle<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> radius <span class="o">=</span> <span class="m">1</span><span class="p">,</span> npoints <span class="o">=</span> <span class="m">100</span><span class="p">)</span>

<span class="c1"># gray border circle</span>
external_cir <span class="o">=</span> circle<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">),</span> radius <span class="o">=</span> <span class="m">0.97</span><span class="p">,</span> npoints <span class="o">=</span> <span class="m">100</span><span class="p">)</span>

<span class="c1"># yellow slice (this will be used for the yellow band)</span>
yellowFrom <span class="o">=</span> <span class="m">75</span>
yellowTo <span class="o">=</span> <span class="m">90</span>
yel_ini <span class="o">=</span> <span class="p">(</span>yellowFrom <span class="o">/</span> <span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
yel_fin <span class="o">=</span> <span class="p">(</span>yellowTo <span class="o">/</span> <span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
Syel <span class="o">=</span> slice2xy<span class="p">(</span><span class="kp">seq.int</span><span class="p">(</span>yel_ini<span class="p">,</span> yel_fin<span class="p">,</span> length.out <span class="o">=</span> <span class="m">30</span><span class="p">),</span> rad <span class="o">=</span> <span class="m">0.9</span><span class="p">)</span>

<span class="c1"># red slice (this will be used for the red band)</span>
redFrom <span class="o">=</span> <span class="m">90</span>
redTo <span class="o">=</span> <span class="m">100</span>
red_ini <span class="o">=</span> <span class="p">(</span>redFrom <span class="o">/</span> <span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
red_fin <span class="o">=</span> <span class="p">(</span>redTo <span class="o">/</span> <span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
Sred <span class="o">=</span> slice2xy<span class="p">(</span><span class="kp">seq.int</span><span class="p">(</span>red_ini<span class="p">,</span> red_fin<span class="p">,</span> length.out <span class="o">=</span> <span class="m">30</span><span class="p">),</span> rad <span class="o">=</span> <span class="m">0.9</span><span class="p">)</span>

<span class="c1"># white slice (this will be used to get the yellow and red bands)</span>
whiteFrom <span class="o">=</span> <span class="m">74</span>
whiteTo <span class="o">=</span> <span class="m">101</span>
white_ini <span class="o">=</span> <span class="p">(</span>whiteFrom<span class="o">/</span><span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
white_fin <span class="o">=</span> <span class="p">(</span>whiteTo<span class="o">/</span><span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
Swhi <span class="o">=</span> slice2xy<span class="p">(</span><span class="kp">seq.int</span><span class="p">(</span>white_ini<span class="p">,</span> white_fin<span class="p">,</span> length.out <span class="o">=</span> <span class="m">30</span><span class="p">),</span> rad <span class="o">=</span> <span class="m">0.8</span><span class="p">)</span>

<span class="c1"># coordinates of major ticks (will be plotted as arrows)</span>
major_ticks_out <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> to <span class="o">=</span> <span class="o">-</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
major_ticks_in <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> to <span class="o">=</span> <span class="o">-</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.75</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="c1"># coordinates of minor ticks (will be plotted as arrows)</span>
tix1_out <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> to <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix2_out <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">7</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="m">7</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix3_out <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">4</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="m">4</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix4_out <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix1_in <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4</span><span class="p">,</span> to <span class="o">=</span> <span class="m">5</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">4-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.85</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix2_in <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">7</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="m">7</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.85</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix3_in <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="m">4</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="m">4</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.85</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
tix4_in <span class="o">=</span> ticks<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> from <span class="o">=</span> <span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> to <span class="o">=</span> <span class="kc">pi</span><span class="o">/</span><span class="m">8-3</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span><span class="p">,</span> radius <span class="o">=</span> <span class="m">0.85</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>

<span class="c1"># coordinates of min and max values (0, 100)</span>
v0 <span class="o">=</span> <span class="m">-1</span> <span class="o">*</span> <span class="m">0</span> <span class="o">*</span> <span class="kc">pi</span> <span class="o">+</span> <span class="m">10</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span>
z0x <span class="o">=</span> <span class="m">0.65</span> <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>v0<span class="p">)</span>
z0y <span class="o">=</span> <span class="m">0.65</span> <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>v0<span class="p">)</span>
v100 <span class="o">=</span> <span class="m">-1</span> <span class="o">*</span> <span class="m">12</span><span class="o">/</span><span class="m">8</span> <span class="o">*</span> <span class="kc">pi</span> <span class="o">+</span> <span class="m">10</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span>
z100x <span class="o">=</span> <span class="m">0.65</span> <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>v100<span class="p">)</span>
z100y <span class="o">=</span> <span class="m">0.65</span> <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>v100<span class="p">)</span>

<span class="c1"># indicated value, say 80 (you can choose another number between 0-100)</span>
value <span class="o">=</span> <span class="m">80</span>

<span class="c1"># angle of needle pointing to the specified value</span>
val <span class="o">=</span> <span class="p">(</span>value<span class="o">/</span><span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="m">12</span><span class="o">/</span><span class="m">8</span><span class="p">)</span>
v <span class="o">=</span> <span class="m">-1</span> <span class="o">*</span> val <span class="o">*</span> <span class="kc">pi</span> <span class="o">+</span> <span class="m">10</span><span class="o">*</span><span class="kc">pi</span><span class="o">/</span><span class="m">8</span>
<span class="c1"># x-y coordinates of needle</span>
val_x <span class="o">=</span> <span class="m">0.7</span> <span class="o">*</span> <span class="kp">cos</span><span class="p">(</span>v<span class="p">)</span>
val_y <span class="o">=</span> <span class="m">0.7</span> <span class="o">*</span> <span class="kp">sin</span><span class="p">(</span>v<span class="p">)</span>

<span class="c1"># label to be displayed</span>
label <span class="o">=</span> <span class="s">&quot;UseR!&quot;</span></code></pre></div>

<h3>Putting everything together</h3>

<p>Once we have all the ingredients, the last step is to put them all together in a plot 
like so:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># open plot</span>
plot<span class="p">(</span>border_cir<span class="o">$</span>x<span class="p">,</span> border_cir<span class="o">$</span>y<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;n&quot;</span><span class="p">,</span> asp<span class="o">=</span><span class="m">1</span><span class="p">,</span> axes<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span>
     xlim<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">-1.05</span><span class="p">,</span><span class="m">1.05</span><span class="p">),</span> ylim<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">-1.05</span><span class="p">,</span><span class="m">1.05</span><span class="p">),</span>
     xlab<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> ylab<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1"># yellow slice</span>
polygon<span class="p">(</span><span class="kt">c</span><span class="p">(</span>Syel<span class="o">$</span>x<span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="kt">c</span><span class="p">(</span>Syel<span class="o">$</span>y<span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        border <span class="o">=</span> <span class="s">&quot;#FF9900&quot;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;#FF9900&quot;</span><span class="p">,</span> lty <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="c1"># red slice</span>
polygon<span class="p">(</span><span class="kt">c</span><span class="p">(</span>Sred<span class="o">$</span>x<span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="kt">c</span><span class="p">(</span>Sred<span class="o">$</span>y<span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        border <span class="o">=</span> <span class="s">&quot;#DC3912&quot;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;#DC3912&quot;</span><span class="p">,</span> lty <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="c1"># white slice</span>
polygon<span class="p">(</span><span class="kt">c</span><span class="p">(</span>Swhi<span class="o">$</span>x<span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="kt">c</span><span class="p">(</span>Swhi<span class="o">$</span>y<span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        border <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> lty <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="c1"># add gray border</span>
lines<span class="p">(</span>external_cir<span class="o">$</span>x<span class="p">,</span> external_cir<span class="o">$</span>y<span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray85&quot;</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
<span class="c1"># add external border</span>
lines<span class="p">(</span>border_cir<span class="o">$</span>x<span class="p">,</span> border_cir<span class="o">$</span>y<span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray20&quot;</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
<span class="c1"># add minor ticks</span>
arrows<span class="p">(</span>x0 <span class="o">=</span> tix1_out<span class="o">$</span>x<span class="p">,</span> y0 <span class="o">=</span> tix1_out<span class="o">$</span>y<span class="p">,</span> x1 <span class="o">=</span> tix1_in<span class="o">$</span>x<span class="p">,</span> y1 <span class="o">=</span> tix1_in<span class="o">$</span>y<span class="p">,</span>
       length <span class="o">=</span> <span class="m">0</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">2.5</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray55&quot;</span><span class="p">)</span>
arrows<span class="p">(</span>x0 <span class="o">=</span> tix2_out<span class="o">$</span>x<span class="p">,</span> y0 <span class="o">=</span> tix2_out<span class="o">$</span>y<span class="p">,</span> x1 <span class="o">=</span> tix2_in<span class="o">$</span>x<span class="p">,</span> y1 <span class="o">=</span> tix2_in<span class="o">$</span>y<span class="p">,</span>
        length <span class="o">=</span> <span class="m">0</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">2.5</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray55&quot;</span><span class="p">)</span>
arrows<span class="p">(</span>x0 <span class="o">=</span> tix3_out<span class="o">$</span>x<span class="p">,</span> y0 <span class="o">=</span> tix3_out<span class="o">$</span>y<span class="p">,</span> x1 <span class="o">=</span> tix3_in<span class="o">$</span>x<span class="p">,</span> y1 <span class="o">=</span> tix3_in<span class="o">$</span>y<span class="p">,</span>
       length <span class="o">=</span> <span class="m">0</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">2.5</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray55&quot;</span><span class="p">)</span>
arrows<span class="p">(</span>x0 <span class="o">=</span> tix4_out<span class="o">$</span>x<span class="p">,</span> y0 <span class="o">=</span> tix4_out<span class="o">$</span>y<span class="p">,</span> x1 <span class="o">=</span> tix4_in<span class="o">$</span>x<span class="p">,</span> y1 <span class="o">=</span> tix4_in<span class="o">$</span>y<span class="p">,</span>
       length <span class="o">=</span> <span class="m">0</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">2.5</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray55&quot;</span><span class="p">)</span>
<span class="c1"># add major ticks</span>
arrows<span class="p">(</span>x0 <span class="o">=</span> major_ticks_out<span class="o">$</span>x<span class="p">,</span> y0 <span class="o">=</span> major_ticks_out<span class="o">$</span>y<span class="p">,</span>
       x1 <span class="o">=</span> major_ticks_in<span class="o">$</span>x<span class="p">,</span> y1 <span class="o">=</span> major_ticks_in<span class="o">$</span>y<span class="p">,</span> length <span class="o">=</span> <span class="m">0</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
<span class="c1"># add value</span>
text<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">-0.65</span><span class="p">,</span> value<span class="p">,</span> cex <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
<span class="c1"># add label of variable</span>
text<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0.43</span><span class="p">,</span> label<span class="p">,</span> cex <span class="o">=</span> <span class="m">3.8</span><span class="p">)</span>
<span class="c1"># add needle</span>
arrows<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> val_x<span class="p">,</span> val_y<span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;#f38171&quot;</span><span class="p">,</span> lwd <span class="o">=</span> <span class="m">7</span><span class="p">)</span>
<span class="c1"># add central blue point</span>
points<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;#2e9ef3&quot;</span><span class="p">,</span> pch <span class="o">=</span> <span class="m">19</span><span class="p">,</span> cex <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="c1"># add values 0 and 100</span>
text<span class="p">(</span>z0x<span class="p">,</span> z0y<span class="p">,</span> labels <span class="o">=</span> <span class="s">&quot;0&quot;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray50&quot;</span><span class="p">)</span>
text<span class="p">(</span>z100x<span class="p">,</span> z100y<span class="p">,</span> labels <span class="o">=</span> <span class="s">&quot;100&quot;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;gray50&quot;</span><span class="p">)</span></code></pre></div>

<p><img class="centered" src="/images/blog/gauge_chart_with_r.png" /></p>

</div>

<hr>

<div class="previous_next">
  
    <a href="/how-to/2012/11/19/Creating-HTML5-slides/" title="Previous post">&larr; previous</a>
  
  &nbsp;&nbsp;
  
    <a href="/how-to/2013/01/23/MDS-in-R/" title="Next post">next &rarr;</a>
  
  <br>
  <p>
  <a class="greenbutton" href="/blog/archive/" title="an archive of all posts">See all posts</a>
  </p>
</div>
    </div>

  </body>
</html>
