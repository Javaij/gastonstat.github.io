<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Visualizing Correlations with Corrgrams &middot; Gaston Sanchez
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Gaston Sanchez
        </a>
      </h1>
      <p class="lead"></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/">Blog</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/software/">Software</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/teaching/">Teaching</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/gastonstat" target="_blank">GitHub</a>
    </nav>

    <!-- <p><small>All contents under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">(CC) BY-NC-SA</a> license, unless otherwise noted</small></p>
  -->
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Visualizing Correlations with Corrgrams</h1>
  <span class="post-date">01 Jun 2013</span>
  <p>In this post we&#39;ll talk about <strong>corrgrams</strong>: a graphical tool for visualizing a matrix 
of correlations.</p>

<p><a title="Rpub corrgrams" href="http://rpubs.com/gaston/corrgrams" target="_blank">
<img class="centered" src="/images/blog/corrgrams.png" />
</a></p>

<h4>Corrgrams</h4>

<p>One of the very basic tasks when analyzing some dataset is to examine the correlations of 
the available variables. Assuming that the data is in matrix format (observations in 
rows, variables in columns), the typical approach to get the correlations is by 
calculating the matrix of correlations.</p>

<p>Among the different plotting options that we can use to visualize such correlations, 
we have the so-called corrgrams. A corrgram is just a graphical representation of the 
cells of a matrix of correlations. The idea is to display the pattern of correlations 
in terms of their signs and magnitudes using visual thinning and correlation-based 
variable ordering. Moreover, the cells of the matrix can be shaded or colored to show 
the correlation value.</p>

<p>In R, we have two useful packages that provide functions to plot corrgrams: 
<code>&quot;corrgram&quot;</code> (by Kevin Wright) and <code>&quot;ellipse&quot;</code> (by Duncan Murdoch and E. D. Chow).</p>

<h4>Toy example</h4>

<p>Here&#39;s a very basic example using <code>corrgram()</code></p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># load packages</span>
<span class="n">library</span><span class="p">(</span><span class="n">corrgram</span><span class="p">)</span>

<span class="c1"># create correlation matrix</span>
<span class="n">set</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">707</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">cor</span><span class="p">(</span><span class="n">matrix</span><span class="p">(</span><span class="n">rnorm</span><span class="p">(</span><span class="mi">70</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>

<span class="c1"># vector of colors (purple to orange)</span>
<span class="n">purple_orange</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">&quot;#8073AC&quot;</span><span class="p">,</span><span class="s2">&quot;#B2ABD2&quot;</span><span class="p">,</span><span class="s2">&quot;white&quot;</span><span class="p">,</span><span class="s2">&quot;#E08214&quot;</span><span class="p">,</span><span class="s2">&quot;#FDB863&quot;</span><span class="p">)</span>

<span class="c1"># create correlation matrix</span>
<span class="n">corrgram</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="no">TRUE</span><span class="p">,</span> <span class="n">lower</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">shade</span><span class="p">,</span> <span class="n">upper</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">pie</span><span class="p">,</span>
         <span class="n">text</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">txt</span><span class="p">,</span> <span class="n">main</span> <span class="o">=</span> <span class="s2">&quot;Example&quot;</span><span class="p">,</span> 
         <span class="n">col</span><span class="o">.</span><span class="n">regions</span> <span class="o">=</span> <span class="n">colorRampPalette</span><span class="p">(</span><span class="n">purple_orange</span><span class="p">))</span></code></pre></div>

<p><img class="centered" src="/images/blog/corrgram2.png" /></a></p>

<p>Here&#39;s the link to the <a title="Rpub corrgrams" href="http://rpubs.com/gaston/corrgrams" target="_blank">Rpub</a> 
with the complete code in R.</p>

</div>

<hr>

<div class="previous_next">
  
    <a href="/opinion/2013/05/22/Holestee-Manifesto/" title="Previous post">&larr; previous</a>
  
  &nbsp;&nbsp;
  
    <a href="/opinion/resources/how-to/2013/06/12/Creating-R-packages-in-windows/" title="Next post">next &rarr;</a>
  
  <br>
  <p>
  <a class="greenbutton" href="/blog/archive/" title="an archive of all posts">See all posts</a>
  </p>
</div>
    </div>

  </body>
</html>
